{"mappings":"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","sources":["src/js/library.js","src/templates/libraryCards.hbs"],"sourcesContent":["import './lightSwitch';\nimport './teamLightbox';\nimport ls from './storage';\nimport Pagination from 'tui-pagination';\nimport { galleryApi } from './randomFilms';\nimport { onPosterClick } from './modal';\nimport createLibraryCards from '../templates/libraryCards.hbs';\nimport { updateDataForLocalStorage } from './localStorage';\nimport { changeColorBtnLibraryClick } from './colorButton';\n\nconst containerLibraryElement = document.querySelector('.library-film_list');\nconst buttonWatchEl = document.querySelector('button[data-watched]');\nconst buttonQueueEl = document.querySelector('button[data-queue]');\ncontainerLibraryElement.addEventListener('click', onPosterClick);\nconst alertInfo = document.querySelector('.library_alert');\nbuttonWatchEl.addEventListener('click', onButtonWatchEl);\nbuttonQueueEl.addEventListener('click', onButtonQueueEl);\n\nlet cardsQuantity;\nif (window.innerWidth < 768) cardsQuantity = 4;\nelse if (window.innerWidth < 1200) cardsQuantity = 8;\nelse cardsQuantity = 9;\n\nconst containerPagination = document.querySelector('.pagination');\nconst paginationLibraryWatch = new Pagination(containerPagination, {\n  itemsPerPage: cardsQuantity,\n  visiblePages: 5,\n  centerAlign: true,\n  firstItemClassName: 1,\n  template: {\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\n    page: '<a class=\"page-btn\">{{page}}</a>',\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\n    disabledMoveButton:\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\n  },\n});\n\nconst paginationLibraryQueue = new Pagination(containerPagination, {\n  itemsPerPage: cardsQuantity,\n  visiblePages: 5,\n  centerAlign: true,\n  firstItemClassName: 1,\n  template: {\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\n    page: '<a class=\"page-btn\">{{page}}</a>',\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\n    disabledMoveButton:\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\n  },\n});\n\ndocument.onload = updateDataForLocalStorage();\ndocument.onload = createMarkupWatchLocalStorage();\n\nfunction onButtonWatchEl(event) {\n  changeColorBtnLibraryClick(event, buttonQueueEl);\n  createMarkupWatchLocalStorage();\n}\n\nfunction onButtonQueueEl(event) {\n  changeColorBtnLibraryClick(event, buttonWatchEl);\n  createMarkupQueueLocalStorage();\n}\n\nfunction createMarkupWatchLocalStorage() {\n  containerLibraryElement.innerHTML = '';\n  alertInfo.innerHTML = '';\n\n  const arrayWatch = ls.load(`toWatch`);\n  const libEL = document.querySelector('.library_alert');\n  if (!arrayWatch || arrayWatch.length === 0) {\n    alertInfo.innerHTML = \"You don't have watched films in your library\";\n    paginationLibraryWatch.reset(0);\n    libEL.classList.add('empty');\n    return;\n  }\n\n  const arrayForRenderFirstPage = arrayWatch.slice(0, cardsQuantity);\n  renderLibraryMarkup(arrayForRenderFirstPage);\n\n  paginationLibraryWatch.reset(arrayWatch.length);\n}\n\nfunction createMarkupQueueLocalStorage() {\n  containerLibraryElement.innerHTML = '';\n  alertInfo.innerHTML = '';\n\n  const arrayQueue = ls.load(`queue`);\n\n  if (!arrayQueue || arrayQueue.length === 0) {\n    alertInfo.innerHTML = \"You don't have films in queue in your library\";\n    paginationLibraryQueue.reset(0);\n    libEL.classList.add('empty');\n    return;\n  }\n\n  const arrayForRenderFirstPage = arrayQueue.slice(0, cardsQuantity);\n  renderLibraryMarkup(arrayForRenderFirstPage);\n\n  paginationLibraryQueue.reset(arrayQueue.length);\n}\n\npaginationLibraryWatch.on('afterMove', event => {\n  const currentPage = event.page;\n  alertInfo.innerHTML = '';\n  const arrayWatch = ls.load(`toWatch`);\n  const arrayForRenderCurrentPage = arrayWatch.slice(\n    (currentPage - 1) * cardsQuantity,\n    currentPage * cardsQuantity\n  );\n  renderLibraryMarkup(arrayForRenderCurrentPage);\n});\n\npaginationLibraryQueue.on('afterMove', event => {\n  const currentPage = event.page;\n  alertInfo.innerHTML = '';\n  const arrayQueue = ls.load(`queue`);\n  const arrayForRenderCurrentPage = arrayQueue.slice(\n    (currentPage - 1) * cardsQuantity,\n    currentPage * cardsQuantity\n  );\n  renderLibraryMarkup(arrayForRenderCurrentPage);\n});\n\nfunction renderLibraryMarkup(array) {\n  let markup = '';\n  array.forEach(el => {\n    galleryApi\n      .fetchMovieById(el)\n      .then(data => {\n        data.release_date = data.release_date.split('-')[0];\n        markup += createLibraryCards(data);\n        return markup;\n      })\n      .then(data => (containerLibraryElement.innerHTML = data))\n      .catch(error => console.log(error));\n  });\n}\n","  <li class='film-card card-item' data-id={{this.id}} data-action>\n    <img\n      {{#if this.poster_path}} \n      src='https://image.tmdb.org/t/p/w500/{{this.poster_path}}'\n      {{else}} \n      src='https://png.pngtree.com/png-clipart/20211121/original/pngtree-not-found-stamp-label-png-image_6948403.png'\n      {{/if}}\n      alt='Poster of movie \"{{this.original_title}}\"'\n      loading='lazy'\n      class=\"film-image\"\n      id=\"{{this.id}}\"\n    />\n    <div class='info'>\n      <p class='film-tittle'>\n        {{this.original_title}}\n      </p>\n      <p class='film-genre'>\n{{#each this.genres}}{{this.name}}{{#unless @last}}, {{/unless}}{{/each}}\n        &#8739;\n        {{this.release_date}} <span class=\"film-raiting\">&nbsp;{{this.vote_average}}&nbsp;</span>\n      </p>\n    </div>\n  </li>\n"],"names":["parcelRequire","$b066c1eafb0051c9$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","lambda","stack1","nullContext","name","hash","fn","program","inverse","noop","loc","start","line","column","end","compiler","main","alias1","alias2","alias3","useData","$1cafa503bc57b7a0$var$containerLibraryElement","document","querySelector","$1cafa503bc57b7a0$var$buttonWatchEl","$1cafa503bc57b7a0$var$buttonQueueEl","addEventListener","$bTcpz","onPosterClick","$1cafa503bc57b7a0$var$alertInfo","$1cafa503bc57b7a0$var$cardsQuantity","event","$abEvz","changeColorBtnLibraryClick","$1cafa503bc57b7a0$var$createMarkupWatchLocalStorage","innerHTML","arrayQueue","$5uEKZ","default","load","length","$1cafa503bc57b7a0$var$paginationLibraryQueue","reset","libEL","classList","add","$1cafa503bc57b7a0$var$renderLibraryMarkup","slice","$1cafa503bc57b7a0$var$createMarkupQueueLocalStorage","window","innerWidth","$1cafa503bc57b7a0$var$containerPagination","$1cafa503bc57b7a0$var$paginationLibraryWatch","$fb9GJ","itemsPerPage","visiblePages","centerAlign","firstItemClassName","currentPage","page","moveButton","disabledMoveButton","moreButton","arrayWatch","array","markup","forEach","el","$jZsFh","galleryApi","fetchMovieById","then","release_date","split","catch","error","console","log","onload","$31u3U","updateDataForLocalStorage","on"],"version":3,"file":"library.38406f3a.js.map"}