{"mappings":"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","sources":["src/js/library.js","src/templates/libraryCards.hbs"],"sourcesContent":["import './lightSwitch';\nimport './teamLightbox';\nimport ls from './storage';\nimport Pagination from 'tui-pagination';\nimport { galleryApi } from './randomFilms';\nimport { onPosterClick } from './modal';\nimport createLibraryCards from '../templates/libraryCards.hbs';\nimport { updateDataForLocalStorage } from './localStorage';\nimport { changeColorBtnLibraryClick } from './colorButton';\n\nconst containerLibraryElement = document.querySelector('.library-film_list');\nconst alertInfo = document.querySelector('.library_alert');\nconst buttonWatchEl = document.querySelector('button[data-watched]');\nconst buttonQueueEl = document.querySelector('button[data-queue]');\n\ncontainerLibraryElement.addEventListener('click', onPosterClick);\nbuttonWatchEl.addEventListener('click', onButtonWatchEl);\nbuttonQueueEl.addEventListener('click', onButtonQueueEl);\n\nconst cardsQuantity = 6;\n\nconst containerPagination = document.querySelector('.pagination');\nconst paginationLibraryWatch = new Pagination(containerPagination, {\n  itemsPerPage: cardsQuantity,\n  visiblePages: 5,\n  centerAlign: true,\n  firstItemClassName: 1,\n  template: {\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\n    page: '<a class=\"page-btn\">{{page}}</a>',\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\n    disabledMoveButton:\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\n  },\n});\n\nconst paginationLibraryQueue = new Pagination(containerPagination, {\n  itemsPerPage: cardsQuantity,\n  visiblePages: 5,\n  centerAlign: true,\n  firstItemClassName: 1,\n  template: {\n    currentPage: '<a class=\"page-btn is-selected\">{{page}}</a>',\n    page: '<a class=\"page-btn\">{{page}}</a>',\n    moveButton: `<button class=\"move-btn move-btn-{{type}}\"></button>`,\n    disabledMoveButton:\n      '<button class=\"move-btn move-btn-{{type}} disabled\" disabled></button>',\n    moreButton: '<a class=\"page-btn next-is-ellip last-child\">...</a>',\n  },\n});\n\ndocument.onload = updateDataForLocalStorage();\ndocument.onload = createMarkupWatchLocalStorage();\n\nfunction onButtonWatchEl(event) {\n  changeColorBtnLibraryClick(event, buttonQueueEl);\n  createMarkupWatchLocalStorage();\n}\n\nfunction onButtonQueueEl(event) {\n  changeColorBtnLibraryClick(event, buttonWatchEl);\n  createMarkupQueueLocalStorage();\n}\n\nfunction createMarkupWatchLocalStorage() {\n  createMarkupFromLocalStorage(\n    'toWatch',\n    \"You don't have watched films in your library\"\n  );\n}\n\nfunction createMarkupQueueLocalStorage() {\n  createMarkupFromLocalStorage(\n    'queue',\n    \"You don't have films in queue in your library\"\n  );\n}\n\npaginationLibraryWatch.on('afterMove', event => {\n  renderMarkupForPaginationMove(event, 'toWatch');\n});\n\npaginationLibraryQueue.on('afterMove', event => {\n  renderMarkupForPaginationMove(event, 'queue');\n});\n\nfunction renderLibraryMarkup(array) {\n  let markup = '';\n  array.forEach(el => {\n    galleryApi\n      .fetchMovieById(el)\n      .then(data => {\n        data.release_date = data.release_date.split('-')[0];\n        data.vote_average = data.vote_average.toFixed(1);\n        markup += createLibraryCards(data);\n        return markup;\n      })\n      .then(data => (containerLibraryElement.innerHTML = data))\n      .catch(error => console.log(error));\n  });\n}\n\nfunction createMarkupFromLocalStorage(key, message) {\n  containerPagination.style.display = 'flex';\n  containerLibraryElement.innerHTML = '';\n  alertInfo.innerHTML = '';\n\n  const arrayDataLocalStorage = ls.load(key);\n\n  if (!arrayDataLocalStorage || arrayDataLocalStorage.length === 0) {\n    alertInfo.innerHTML = message;\n    containerPagination.style.display = 'none';\n    return;\n  }\n\n  const arrayForRenderFirstPage = arrayDataLocalStorage.slice(0, cardsQuantity);\n  renderLibraryMarkup(arrayForRenderFirstPage);\n\n  if (key === 'toWatch') {\n    paginationLibraryWatch.reset(arrayDataLocalStorage.length);\n  } else {\n    paginationLibraryQueue.reset(arrayDataLocalStorage.length);\n  }\n}\n\nfunction renderMarkupForPaginationMove(event, key) {\n  const currentPage = event.page;\n  alertInfo.innerHTML = '';\n  const arrayDataLocalStorage = ls.load(key);\n  const arrayForRenderCurrentPage = arrayDataLocalStorage.slice(\n    (currentPage - 1) * cardsQuantity,\n    currentPage * cardsQuantity\n  );\n  renderLibraryMarkup(arrayForRenderCurrentPage);\n}\n","  <li class='film-card card-item' data-id={{this.id}} data-action>\n    <img\n      {{#if this.poster_path}} \n      src='https://image.tmdb.org/t/p/w500/{{this.poster_path}}'\n      {{else}} \n      src='https://png.pngtree.com/png-clipart/20211121/original/pngtree-not-found-stamp-label-png-image_6948403.png'\n      {{/if}}\n      alt='Poster of movie \"{{this.original_title}}\"'\n      loading='lazy'\n      class=\"film-image\"\n      id=\"{{this.id}}\"\n    />\n    <div class='info'>\n      <p class='film-tittle'>\n        {{this.original_title}}\n      </p>\n      <p class='film-genre'>\n{{#each this.genres}}{{this.name}}{{#unless @last}}, {{/unless}}{{/each}}\n        &#8739;\n        {{this.release_date}} <span class=\"film-raiting\">&nbsp;{{this.vote_average}}&nbsp;</span>\n      </p>\n    </div>\n  </li>\n"],"names":["parcelRequire","$b066c1eafb0051c9$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","lambda","stack1","nullContext","name","hash","fn","program","inverse","noop","loc","start","line","column","end","compiler","main","alias1","alias2","alias3","useData","$1cafa503bc57b7a0$var$containerLibraryElement","document","querySelector","$1cafa503bc57b7a0$var$alertInfo","$1cafa503bc57b7a0$var$buttonWatchEl","$1cafa503bc57b7a0$var$buttonQueueEl","addEventListener","$bTcpz","onPosterClick","event","$abEvz","changeColorBtnLibraryClick","$1cafa503bc57b7a0$var$createMarkupWatchLocalStorage","$1cafa503bc57b7a0$var$createMarkupFromLocalStorage","$1cafa503bc57b7a0$var$containerPagination","$1cafa503bc57b7a0$var$paginationLibraryWatch","$fb9GJ","itemsPerPage","visiblePages","centerAlign","firstItemClassName","currentPage","page","moveButton","disabledMoveButton","moreButton","$1cafa503bc57b7a0$var$paginationLibraryQueue","$1cafa503bc57b7a0$var$renderLibraryMarkup","array","markup","forEach","el","$jZsFh","galleryApi","fetchMovieById","then","release_date","split","vote_average","toFixed","innerHTML","catch","error","console","log","key","message","style","display","arrayDataLocalStorage","$5uEKZ","default","load","length","slice","reset","$1cafa503bc57b7a0$var$renderMarkupForPaginationMove","onload","$31u3U","updateDataForLocalStorage","on"],"version":3,"file":"library.47e03a35.js.map"}